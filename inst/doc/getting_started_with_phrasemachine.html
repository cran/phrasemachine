<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Matthew Denny" />

<meta name="date" content="2016-10-24" />

<title>Getting started with phrasemachine</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Getting started with phrasemachine</h1>
<h4 class="author"><em>Matthew Denny</em></h4>
<h4 class="date"><em>2016-10-24</em></h4>



<p>This vignette is designed to introduce you to the <strong>phrasemachine</strong> R package. The main function, <code>phrasemachine()</code> takes a document or list of documents as input and returns a list of phrases extracted from these documents. These phrases can then be fed into the preprocessing pipelines for a number of other text analysis packages in R, including <a href="https://github.com/kbenoit/quanteda">quanteda</a>. A parallel implementation of this package is available for Python users. More information (including easy installation instruction via pip) can be found at the <a href="https://github.com/slanglab/phrasemachine">GitHub</a> page for this package.</p>
<p>The paper detailing <strong>phrasemachine</strong> can be found at the link below:</p>
<ul>
<li>Handler, A., Denny, M. J., Wallach, H., &amp; O’Connor, B. (2016). “Bag of What? Simple Noun Phrase Extraction for Text Analysis”. In <em>Proceedings of the Workshop on Natural Language Processing and Computational Social Science at the 2016 Conference on Empirical Methods in Natural Language Processing</em>. <a href="https://brenocon.com/handler2016phrases.pdf"><strong>[Available Here]</strong></a></li>
</ul>
<p>This package relies on a part-of-speech (POS) tagger to extract phrases. The most portable POS tagger available in R comes in the <code>OpenNLP</code> package. However, the POS tagger this package provides is not as accurate as the current state of the art taggers available in software packages available for other languages (such as <code>Spacy</code> or <code>CoreNLP</code>). We intend to eventually incorporate other POS taggers into this package, but for now, if you want the highest accuracy, we suggest using the Python implementation of the package. In practice, there may not be a significant difference in the end results, but we wish to make the end user aware of this possibility.</p>
<div id="installation" class="section level2">
<h2>Installation</h2>
<p>The release version of the package can be installed from CRAN as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;phrasemachine&quot;</span>)</code></pre></div>
<p>If you want to get the latest version from GitHub, you will need to have the <code>devtools</code> R package installed first:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">install.packages</span>(<span class="st">&quot;devtools&quot;</span>)</code></pre></div>
<p>Now we can install from GitHub using the following line:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_github</span>(<span class="st">&quot;slanglab/phrasemachine/R/phrasemachine&quot;</span>)</code></pre></div>
<p>Once the <code>phrasemachine</code> package is installed, you may access its functionality as you would any other package by calling:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(phrasemachine)</code></pre></div>
<p>If all went well, check out <code>vignette(&quot;getting_started_with_phrasemachine&quot;)</code> which will pull up this vignette!</p>
<div id="java-issues" class="section level3">
<h3>Java Issues</h3>
<p>In general, you will need to have Java 1.8+ installed on your computer for the <code>OpenNLP</code> package to work. There are a number of operating system specific tutorials on the web, and most newer computers meet this requirement by default. However, we expect issues with Java to be the most common problems users encounter when trying to install and use the <code>OpenNLP</code> package, which we use for POS tagging. In particular, If you are trying to install this package on a newer Mac computer (OS X 10.10+), you may encounter an error when trying to load the package. We suggest you follow the instructions in the blog post <a href="http://conjugateprior.org/2014/12/r-java8-osx/"><strong>[here]</strong></a> to configure R and Java correctly if you encounter an error.</p>
<p>On older operating systems, you may not have Java 1.8+ installed, in which case you will need to install it first before updating your Java settings.</p>
</div>
</div>
<div id="basic-usage" class="section level2">
<h2>Basic Usage</h2>
<p>We begin by loading the package and some example data from the <code>quanteda</code> R package. In this example, we will make use of 5 U.S. presidential inaugural speeches.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(phrasemachine)</code></pre></div>
<pre><code>## phrasemachine: Simple Phrase Extraction
## Version 1.0.0 created on 2016-10-23.
## copyright (c) 2016, Matthew J. Denny, Abram Handler, Brendan O'Connor.
## Type help('phrasemachine') or
## vignette('getting_started_with_phrasemachine') to get started.
## Development website: https://github.com/slanglab/phrasemachine</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># load in U.S. presidential inaugural speeches from Quanteda example data.</span>
corp &lt;-<span class="st"> </span>quanteda::<span class="kw">corpus</span>(quanteda::inaugTexts)
<span class="co"># use first 5 documents for example</span>
documents &lt;-<span class="st"> </span>quanteda::<span class="kw">texts</span>(corp)[<span class="dv">1</span>:<span class="dv">5</span>]
<span class="co"># take a look at the document names</span>
<span class="kw">print</span>(<span class="kw">names</span>(documents))</code></pre></div>
<pre><code>## [1] &quot;1789-Washington&quot; &quot;1793-Washington&quot; &quot;1797-Adams&quot;      &quot;1801-Jefferson&quot; 
## [5] &quot;1805-Jefferson&quot;</code></pre>
<p>Phrasemachine provides one main function: <code>phrasemachine()</code>, which takes as input a vector of strings (one string per document), or a <code>quanteda</code> corpus object. This function returns phrases extracted from the input documents in one of two forms. The first option, specified by selecting <code>return_phrase_vectors = TRUE</code> returns a list object. Each entry in the list object represents a document, and is a character vector with an extracted phrase as each entry in the vector. If <code>return_phrase_vectors = FALSE</code>, then a character vector is returned by the function. Each entry in this character vector will be an extracted phrase, and the unigrams in these phrases will be underscore separated. Selecting this option will allow the user to assign the resulting character vector back into a <code>quanteda</code> corpus object for use in their normal preprocessing pipeline.</p>
<p>The minimum and maximum token length for phrases may be specified via the <code>minimum_ngram_length</code> and <code>maximum_ngram_length</code> arguments, which default to 1 and 8 respectively. The <code>regex</code> argument can be used to supply a custom regular expression for phrase extraction, but defaults to <code>&quot;(A|N)*N(PD*(A|N)*N)*&quot;</code>, which is the <strong>SimpleNP</strong> grammar in <a href="https://brenocon.com/handler2016phrases.pdf">Hander et al. (2016)</a>). If <code>return_phrase_vectors = TRUE</code> then the user may additionally specify <code>return_tag_sequences = TRUE</code> (the default value is <code>FALSE</code>), to return the tag sequences associated with each phrase. This can be useful if the user wishes to perform further selection on specific tag patterns.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># run phrasemachine</span>
phrases &lt;-<span class="st"> </span><span class="kw">phrasemachine</span>(documents,
                         <span class="dt">minimum_ngram_length =</span> <span class="dv">2</span>,
                         <span class="dt">maximum_ngram_length =</span> <span class="dv">8</span>,
                         <span class="dt">return_phrase_vectors =</span> <span class="ot">TRUE</span>,
                         <span class="dt">return_tag_sequences =</span> <span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## Currently tagging document 1 of 5 
## Currently tagging document 2 of 5 
## Currently tagging document 3 of 5 
## Currently tagging document 4 of 5 
## Currently tagging document 5 of 5 
## Extracting phrases from document 1 of 5 
## Extracting phrases from document 2 of 5 
## Extracting phrases from document 3 of 5 
## Extracting phrases from document 4 of 5 
## Extracting phrases from document 5 of 5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># look at some example phrases</span>
<span class="kw">print</span>(phrases[[<span class="dv">1</span>]]$phrases[<span class="dv">1</span>:<span class="dv">10</span>])</code></pre></div>
<pre><code>##  [1] &quot;Fellow-Citizens_of_the_Senate&quot; &quot;House_of_Representatives&quot;     
##  [3] &quot;vicissitudes_incident&quot;         &quot;vicissitudes_incident_to_life&quot;
##  [5] &quot;incident_to_life&quot;              &quot;greater_anxieties&quot;            
##  [7] &quot;14th_day&quot;                      &quot;14th_day_of_the_present_month&quot;
##  [9] &quot;day_of_the_present_month&quot;      &quot;present_month&quot;</code></pre>
<p>From here, the user may include the phrases extracted by <code>phrasemachine()</code> in any downstream analyses.</p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
